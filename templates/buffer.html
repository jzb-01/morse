// Filter
morse_box.value = morse_box.value.trimStart();
const validMorse = /^[.\- /]*$/;
/// Remove invalid characters
if (!validMorse.test(morse_box.value)) {
  morse_box.value = morse_box.value.replace(/[^.\- /]/g, '');
}
/// Replace multiple spaces with a single space
morse_box.value = morse_box.value.replace(/\s{2,}/g, ' ');

/// Replace spaces after slashes with a single slash
morse_box.value = morse_box.value.replace(/\/\s+/g, '/');




if (event.inputType === "deleteContentBackward" && cursorPosition >= 3 &&
    morse_box.value[cursorPosition-1] === " " &&
    morse_box.value[cursorPosition - 2] === "/" &&
    morse_box.value[cursorPosition - 3] === " ") {
  morse_box.value = morse_box.value.slice(0, cursorPosition - 3) + morse_box.value.slice(cursorPosition);
}




You can use JavaScript to dynamically get the Morse code from the row. Here's a general idea:

Add an onclick attribute to the button that calls a function.
In the function, use JavaScript to find the Morse code in the same row as the button.
For example:

<td><button onclick="executeFunction(this)">Execute</button></td>
In your JavaScript:

function executeFunction(button) {
    var morseCode = button.parentElement.previousElementSibling.textContent;
    // Now you can use morseCode as needed
}
This way, the function will automatically get the Morse code from the row where the button was clicked.




/// Telegraph function
document.addEventListener("keydown", function(event) {
    if (event.key == " ")
    {
        start_time = new Date();
        setInterval(increase, 1);
        if (end_time)
        {
            let space_duration = start_time - end_time;
            if (space_duration > (time_unit*7 + word_max))
            {
                message.textContent += " / ";
                console.log("a (/) was inserted duw to too much time")
                console.log("time_unit: " + time_unit);
                console.log("space_duration: " + space_duration);
                console.log("start_time: " + start_time);
                console.log("end_time: " + end_time);
                end_time = null;
                return;
            }
            else if ((time_unit*3)-letter_min <= space_duration && space_duration <= (time_unit*3)+letter_max)
            {
                message.textContent += " ";
                console.log("a (   ) was inserted")
                console.log("time_unit: " + time_unit);
                console.log("space_duration: " + space_duration);
                console.log("start_time: " + start_time);
                console.log("end_time: " + end_time);
                end_time = null;
            }
            else if ((time_unit*7)-word_min <= space_duration && space_duration <= (time_unit*7)+word_max)
            {
                message.textContent += " / ";
                console.log("a (/) was inserted")
                console.log("time_unit: " + time_unit);
                console.log("space_duration: " + space_duration);
                console.log("start_time: " + start_time);
                console.log("end_time: " + end_time);
                end_time = null;
            }
        }
    }
});
document.addEventListener("keyup", function(event) {
    if (event.key == " ")
    {
        if (!start_time)
            {
                return;
            }
        end_time = new Date();
        let duration = end_time - start_time;
        if (time_unit-dot_min <= duration && duration <= time_unit+dot_max)
        {
            message.textContent += ".";
            console.log("a (.) was inserted")
            console.log("time_unit: " + time_unit);
            console.log("duration: " + duration);
            console.log("start_time: " + start_time);
            console.log("end_time: " + end_time);
            start_time = null;
        }
        else if ((time_unit*3)-dash_min <= duration && duration <= (time_unit*3)+dash_max)
        {
            message.textContent += "-";
            console.log("a (-) was inserted")
            console.log("time_unit: " + time_unit);
            console.log("duration: " + duration);
            console.log("start_time: " + start_time);
            console.log("end_time: " + end_time);
            start_time = null;
        }
    }
});
// Clear the code
clear.addEventListener('click', function(){
    message.textContent = '';
})



document.addEventListener("keydown", function(event) {
  if (event.key == " ")
  {
      if (timer_flag == false)
      {
          clearInterval(intervalID);
          timer = 0;
          document.getElementById("timer").innerHTML = 0;
          start_time = new Date();
          timer_flag = true;
          intervalID = setInterval(increase, 1);
      }
  }
});
document.addEventListener("keyup", function(event) {
  if (event.key == " ")
  {
      if (timer_flag == true)
      {
          clearInterval(intervalID);
          timer = 0;
          document.getElementById("timer").innerHTML = 0;
          end_time = new Date();
          timer_flag = false;
          intervalID = setInterval(increase, 1);
      }
  }
});